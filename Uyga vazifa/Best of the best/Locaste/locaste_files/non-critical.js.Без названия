import{domAppend as e,domRemove as o,forceRepaintSVG as t,getCookie as r,objDataset as s,resolve as a}from"../framework/base/croco.js";import{getLocalData as n}from"../framework/base/config.js";import{Tracker as i}from"../framework/base/event-tracker.js";import"../framework/base/lacoste-api.js";import"../framework/components/cookie-consent.js";import"../framework/components/minicart.js";import{headerRichMenuInit as c}from"../framework/components/header-rich-menu.js";import{headerResponsiveInit as m}from"../framework/components/header-responsive.js";import{addtocartInit as p}from"../framework/components/addtocart.js";import{topBannerInit as l}from"../framework/components/top-banner.js";import{customScrollbarInit as d}from"../framework/modules/custom-scrollbar.js";import{lazyloader as f}from"../framework/modules/lazyload.js";import{headerTagPlan as u}from"../framework/tracking/header-tagplan.js";import{scriptLoad as w}from"../framework/modules/asset-load.js";import{initLoginPanel as k}from"../framework/modules/authentication.js";import{wishlistInit as h}from"../framework/modules/wishlist.js";async function g(){const e=await n("configuration.search"),{bindSearchPopinBehavior:o}=await import("../framework/components/search/search-utils.js");if([...document.querySelectorAll(".js-search")].forEach(t=>{o(),s(t,"popinTplData",JSON.stringify(e)),s(t,"initCallback",async function(){const{onSearchPopinOpened:o}=await import("../framework/components/search/search-utils.js");if(o(),e&&e.isAlgoliaEnabled||import("../framework/components/search/dw-search.js").then(({dwSearchInit:e})=>{e()}),e){if(!e.isAlgoliaEnabled||!e.isInstantSearchEnabled){const e=document.querySelector(".js-search-input-label");e&&e.classList.remove("is-hidden")}if(e.isSuggestionsEnabled){const e=document.querySelector(".js-suggestions");e&&e.classList.remove("is-hidden")}}}),t.addEventListener("click",async function(){document.documentElement.classList.add("search-panel--opened"),document.querySelector(".js-menu-main").classList.remove("is-folded-down")})}),window.location.hash.startsWith("#query=")){let e=document.querySelector(".js-search");if(e){const{openPopin:o}=await import("../framework/base/popin.js");o(e),document.documentElement.classList.add("search-panel--opened")}}}function j(){const e=document.querySelector(".js-script-load-config");if(e){const o=e.dataset;if(!o.condition||o.condition&&document.querySelector(o.condition)){const t={};[...e.attributes].forEach(({name:e,value:o})=>{e.startsWith("data-")&&!["data-src","data-condition"].includes(e)&&(t[e]=o)}),w({src:o.src,async:!0,data:t})}}}if(performance.mark("non_critical_execute"),i.updateTagPlan(u),f.update(),c(),m(),g(),p(),d(),l(),j(),Lacoste&&Lacoste.features){const e=Lacoste.features.network&&Lacoste.features.network.notifications;e&&import("../framework/components/network-status.js").then(({networkStatusInit:o})=>o(e));const o="serviceWorker"in navigator&&Lacoste.features.network&&Lacoste.features.network.offlinepage;o&&import("../framework/components/offline-loader.js").then(({offlineLoaderInit:e})=>e(o)),Lacoste.features.prospectCampaignUrl&&import("../framework/components/campaign.js").then(({popinCampaignInit:e})=>e(Lacoste.features.prospectCampaignUrl)),Lacoste.features.marketingCampaignUrl&&!r("marketingCampaign")&&import("../framework/components/campaign-marketing.js").then(({marketingPopinInit:e})=>e(Lacoste.features.marketingCampaignUrl)),Lacoste.features.geolocation&&!r(Lacoste.features.geolocation.cookie.name)&&import("../framework/components/geolocation-popin.js")}const L=document.querySelector(".js-wishlist-link");L&&(n("wishlist").then(async e=>{if(e&&e.productList){const{render:o}=await import("../framework/vendors/lit-html/lit-html.js"),{tplCounter:t}=await import("../framework/templates/components/helpers.tpl.js"),r=document.createElement("span");r.className="js-wishlist-counter",L.appendChild(r),o(t(!1,e.productList.totalItems),r)}}),L.addEventListener("click",()=>{const e=i.getDatalayer();i.sendTracking("header.onWishlistIconClick",{"%pagecategory%":a("page.category",e),"%userloggedtype%":a("user.type",e)})})),Lacoste&&Lacoste.siteprefs&&!Lacoste.siteprefs.IS_ECOMMERCE_DISABLED&&Lacoste.siteprefs.REACHFIVE_ENABLED&&import("../framework/components/logout.js").then(({logoutInit:e})=>e()),k("wishlist"),h();const y=document.querySelector(".js-didomi-manage-cookies");if(y&&y.addEventListener("click",()=>{window.Didomi&&window.Didomi.preferences&&window.Didomi.preferences.show()}),Lacoste&&Lacoste.siteprefs&&Lacoste.siteprefs.ONLINE_CHAT_TYPE&&!document.querySelector(".js-storelocator"))switch(Lacoste.siteprefs.ONLINE_CHAT_TYPE){case"Easemob":import("../framework/components/easemob-chat.js").then(({easemobChatInit:e})=>e());break;case"CustomerService":import("../framework/components/customer-service-chat.js").then(({customerServiceChatInit:e})=>e())}"undefined"!=typeof svg4everybody&&svg4everybody(),document.documentElement.classList.remove("non-critical-loading");const b=async({details:e})=>{const{build:o}=await import("../framework/base/popin.js"),t=o({instanceId:"popin-adblockers",tplData:{...e,onClosePopin:()=>{t.close(),window.location.reload()}}});t.open()};async function E(){const r=await n("adblockers");r&&r.banner&&r.url&&fetch(r.url,{method:"HEAD",mode:"no-cors"}).then(e=>e).catch(async()=>{const{render:s}=await import("../framework/vendors/lit-html/lit-html.js"),{tplAdblockersBanner:a}=await import("../framework/templates/adblockers.tpl.js"),n=document.createElement("div");e(n,document.body),s(a({...r.banner,openAdblockerPopin:()=>b(r),closeBanner:()=>o(n)}),n),t(n)})}E();