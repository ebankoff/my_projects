import{getTypedDataset as e,objDataset as o,fetchJson as t}from"../framework/base/croco.js";import{mediaQuery as r}from"../framework/base/config.js";import{initModularTracking as n}from"../framework/pages/modular-tracking.js";function l(t){t.forEach(t=>{if(t&&!e(t).autoplay){const e=t.closest(".js-modular-push"),r=e?e.querySelector(".js-video-overlay"):null;r&&(o(t,"startCallback",()=>{r.classList.add("is-hidden")}),o(t,"endCallback",()=>{r.classList.remove("is-hidden")}))}})}export async function modularInit(){const e=document.querySelector(".js-modular-full-page"),o=document.querySelectorAll(".js-fader"),s=document.querySelector(".js-anim-enterview-enabled"),a=document.querySelector(".js-bg-transition-enabled"),i=document.querySelectorAll(".js-parallax-wrapper"),m=document.querySelectorAll(".js-pin-wrapper"),c=document.querySelectorAll(".js-snap-slider-wrapper"),d=document.querySelectorAll(".js-sticky-wrapper"),u=document.querySelectorAll(".js-countdown"),p=document.querySelectorAll(".js-zoom-wrapper"),f=document.querySelectorAll(".js-layer-form"),j=document.querySelectorAll(".js-modular--starter"),w=document.querySelectorAll(".js-modular--productlist"),h=document.querySelectorAll(".js-static-video-wrapper"),k=document.querySelectorAll(".js-story-btn"),y=document.querySelectorAll(".js-legal-layer");if(s&&(import("../framework/components/anim-enterview.js"),r.desktopOnly.matches&&i.length&&import("../framework/modules/parallax.js").then(({parallaxInit:e})=>e())),a&&import("../framework/components/background-transition.js"),h.length&&(import("../framework/modules/abstract-video.js").then(({videosInit:e})=>{e(h)}),l(h)),o.length&&import("../framework/modules/fader.js").then(({faderInit:e})=>e()),m.length&&import("../framework/modules/pin.js").then(({pinInit:e})=>e()),c.length&&import("../framework/components/slider-preconfigured.js").then(({sliderInit:e})=>e(c)),d.length&&import("../framework/modules/sticky.js").then(({stickyInit:e})=>e()),u.length&&import("../framework/components/countdown.js").then(({initCountdown:e})=>e(u)),p.length&&import("../framework/components/zoom-image.js").then(({zoomImageInit:e})=>e({})),f.length&&import("../framework/components/modular-form.js").then(({formLayerInit:e})=>e(f)),j.length&&import("../framework/components/modular-starter.js").then(({modularStarterInit:e})=>e(j)),w.length&&import("../framework/components/product-tile.js").then(({productTileInit:e})=>e()),k.length&&import("../framework/modules/stories.js").then(({storiesInit:e})=>e(k)),y.length&&(import("../framework/modules/asset-load.js").then(({cssLoad:e})=>e(`${Lacoste.statics.CSS_PATH}critical/legal-critical.css`)),import("../framework/modules/accordion.js").then(({accordionInit:e})=>e())),e&&e.dataset.viewPageUrl){const o=()=>{window.removeEventListener("scroll",o),t(e.dataset.viewPageUrl).then(e=>{e&&e.notification&&import("../framework/base/notifications.js").then(({initNotification:o})=>o(e.notification))})};window.addEventListener("scroll",o)}n()};modularInit();